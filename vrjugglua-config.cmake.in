# CMake cross-platform build system
# 2009-2010 Ryan Pavlik <rpavlik@iastate.edu>
# http://academic.cleardefinition.com/
# Iowa State University HCI Graduate Program/VRAC


if(NOT TARGET vrjlua_exported_vrjugglua)
	set(VRJUGGLUA_LIBRARIES vrjlua_exported_vrjugglua)
	set(VRJUGGLUA_FLTK_CONSOLE_LIBRARIES vrjlua_exported_vrjugglua-fltk)
	set(VRJUGGLUA_QT_CONSOLE_LIBRARIES vrjlua_exported_vrjugglua-qt)

	get_filename_component(_IMPORT_PREFIX "${CMAKE_CURRENT_LIST_FILE}" PATH)
	include("${_IMPORT_PREFIX}/vrjlua-targets.cmake")

	# Compute the installation prefix relative to this file.
	get_filename_component(_IMPORT_PREFIX "${CMAKE_CURRENT_LIST_FILE}" PATH)
	get_filename_component(_IMPORT_PREFIX "${_IMPORT_PREFIX}" PATH)
	if(NOT WIN32)
		get_filename_component(_IMPORT_PREFIX "${_IMPORT_PREFIX}" PATH)
	endif()
	set(VRJUGGLUA_VRJ30 @BUILD_WITH_VRJ30@)

	set(VRJUGGLUA_BASE_DIR "${_IMPORT_PREFIX}")
	set(VRJUGGLUA_INCLUDE_DIRS "${_IMPORT_PREFIX}/include")
	set(_IMPORT_PREFIX)

	if(			(NOT BOOST_INCLUDEDIR)
			AND (NOT BOOST_LIBRARYDIR)
			AND (NOT BOOST_ROOT)
			AND (NOT BOOSTROOT))

		# Try to help in case we're installed alongside Boost
		#set(BOOST_ROOT "${_IMPORT_PREFIX}")
	endif()
	list(APPEND CMAKE_PREFIX_PATH "${_IMPORT_PREFIX}")

	set(VRJUGGLERRUNTIME_BUNDLE @VRJUGGLERRUNTIME_BUNDLE@)
	
	function(install_vrjugglua_lua_files)
		install(DIRECTORY "${VRJUGGLUA_BASE_DIR}/share/vrjugglua/lua/"
			DESTINATION "share/vrjugglua/lua/"
			${ARGN})
	endfunction()

	if(TARGET vrjlua_exported_luac AND NOT TARGET luac)
		# Create a luac target to match the one we imported, so LuaTargets.cmake works
		add_executable(luac IMPORTED)
		get_property(_luac_configs TARGET vrjlua_exported_luac PROPERTY IMPORTED_CONFIGURATIONS)
		set_property(TARGET luac PROPERTY IMPORTED_CONFIGURATIONS ${_luac_configs})
		foreach(_config ${_luac_configs})
			get_property(_luac_location TARGET vrjlua_exported_luac PROPERTY IMPORTED_LOCATION_${_config})
			set_property(TARGET luac PROPERTY IMPORTED_LOCATION_${_config} ${_luac_location})
		endforeach()
	endif()

	include(FindPackageHandleStandardArgs)
	find_package_handle_standard_args(VRJuggLua
		DEFAULT_MSG
		VRJUGGLUA_LIBRARIES
		VRJUGGLUA_FLTK_CONSOLE_LIBRARIES
		VRJUGGLUA_INCLUDE_DIRS
		VRJUGGLUA_BASE_DIR)
endif()
